<!DOCTYPE html>
<html>
  <head>
    <!-- do not remove anything in head, can add stuff if needed though -->
    <link rel="stylesheet" type="text/css" href="../../src/css/style.css">
    <link rel="stylesheet" type="text/css" href="../../src/css/create_report.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://kit.fontawesome.com/215800797e.js" crossorigin="anonymous"></script>
  </head>
  <body>
    <div class="report-nav">
        <button class="back-button" onclick="window.location.href='food_hygiene.html';"><i class="fas fa-chevron-left"></i>   Back</button>
        <h2>Healthier Choice</h2>
        <button class="next-button hide" onclick="goNext()">Next   <i class="fas fa-chevron-right"></i></button>
    </div>
    <div class="main-content-report">
        <div class="question">
            <p>50% of healthier variety of food items per stall.</p>
            <div class="icon">
                <i class="checkbox fas" onclick="change(this)"></i>
            </div>
        </div>
        <div class="question">
            <p>Label caloric count of healthier options.</p>
            <div class="icon">
                <i class="checkbox fas" onclick="change(this)"></i>
            </div>
        </div>
        <div class="question">
            <p>Include HPB’s Identifiers beside healthier options.</p>
            <div class="icon">
                <i class="checkbox fas" onclick="change(this)"></i>
            </div>
        </div>
        <div class="question">
            <p>Use of healthier cooking oils.</p>
            <div class="icon">
                <i class="checkbox fas" onclick="change(this)"></i>
            </div>
        </div>
        <div class="question">
            <p>Offer wholemeal/ whole-grain option.</p>
            <div class="icon">
                <i class="checkbox fas" onclick="change(this)"></i>
            </div>
        </div>
        <div class="question">
            <p>Healthier option food sold at lower price than regular items.</p>
            <div class="icon">
                <i class="checkbox fas" onclick="change(this)"></i>
            </div>
        </div>
        <div class="question">
            <p>Limit deep-fried and pre-deep fried food items sold (≤ 20% deep-fried items).</p>
            <div class="icon">
                <i class="checkbox fas" onclick="change(this)"></i>
            </div>
        </div>
        <div class="question">
            <p>No sugar / Lower-sugar brewed beverage offerings according to guidelines.</p>
            <div class="icon">
                <i class="checkbox fas" onclick="change(this)"></i>
            </div>
        </div>
        <div class="question">
            <p>Healthier option beverages sold at lower price than regular items.</p>
            <div class="icon">
                <i class="checkbox fas" onclick="change(this)"></i>
            </div>
        </div>
        <div class="question">
            <p>Label caloric count of healthier options.</p>
            <div class="icon">
                <i class="checkbox fas" onclick="change(this)"></i>
            </div>
        </div>
        <div class="question">
            <p>Limit sugar content on commercially-prepared sweetened beverages. (≥ 70% commercially-prepared sweetened beverages sold to have HCS)</p>
            <div class="icon">
                <i class="checkbox fas" onclick="change(this)"></i>
            </div>
        </div>
    </div>
    <div class="score-bar">
        <h2>SCORE</h2>
        <h2><span id="score">0</span> / <span id="out-of">11</span></h2>
    </div>

    <script>
        function change(qn) {
            var lastClass = qn.classList[qn.classList.length-1];
            if (lastClass == "fas") {
                qn.classList.add("fa-check");
                scoreAdd();
            } else if (lastClass == "fa-window-minimize") {
                qn.classList.remove("fa-window-minimize");
                qn.classList.add("fa-check");
                scoreAdd();
                outOfAdd();
            } else if (lastClass == "fa-check") {
                qn.classList.remove("fa-check");
                qn.classList.add("fa-times");
                scoreSubtract();
            } else if (lastClass == "fa-times") {
                qn.classList.remove("fa-times");
                qn.classList.add("fa-window-minimize");
                outOfSubtract();
            }
            checkFilled();
        }

        function checkFilled() {
            //checks that all the checkboxes so that next button can be shown
            var checkboxes = document.getElementsByClassName("main-content-report")[0].getElementsByTagName("i");

            var i = 0;
            var allFilled = true;
            while (i<checkboxes.length && allFilled) {
                if (checkboxes[i].classList.length < 3) {
                    allFilled = false;
                }
                i += 1
            }
            if (allFilled) {
                document.getElementsByClassName("next-button")[0].classList.remove("hide");
            }
        }

        function scoreAdd() {
            var currScore = parseInt(document.getElementById("score").innerHTML);
            document.getElementById("score").innerHTML = currScore+1;
        }

        function scoreSubtract() {
            var currScore = parseInt(document.getElementById("score").innerHTML);
            document.getElementById("score").innerHTML = currScore-1;
        }

        function outOfAdd() {
            var currOutOf = parseInt(document.getElementById("out-of").innerHTML);
            document.getElementById("out-of").innerHTML = currOutOf+1;
        }

        function outOfSubtract() {
            var currOutOf = parseInt(document.getElementById("out-of").innerHTML);
            document.getElementById("out-of").innerHTML = currOutOf-1;
        }
    </script>

    <script>
        function goNext() {
            //TO DO: upload score and outOf
            var score = parseInt(document.getElementById("score").innerHTML);
            var outOf = parseInt(document.getElementById("out-of").innerHTML);
            window.location.href='workplace_safety_health.html';
        }
    </script>

    <!--- do not remove this script line, it allows the service worker to function -->
    <script src="src/js/app.js"></script> 
  </body>
</html>